<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pudding de pain perdu au parmesan</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
body {
font-family: 'Poppins', sans-serif;
}

.header-img {
width: 100%;
max-height: 400px;
object-fit: cover;
border-radius: 12px;
}

.section-title {
position: relative;
display: inline-block;
padding-bottom: 0.5rem;
margin-bottom: 1.5rem;
}

.section-title::after {
content: "";
position: absolute;
width: 50px;
height: 3px;
background-color: #ffc107;
bottom: 0;
left: 50%;
transform: translateX(-50%);
border-radius: 2px;
}

.card {
border: none;
border-radius: 12px;
overflow: hidden;
transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card:hover {
transform: translateY(-5px);
box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
}

.card-img-top {
border-bottom: 1px solid #eee;
height: 180px;
object-fit: cover;
border-radius: 12px 12px 0 0;
}

.card-body {
text-align: center;
}

.nutriscore {
height: 40px;
margin-top: 0.5rem;
}

.steps .step {
display: flex;
align-items: flex-start;
gap: 1rem;
background-color: #f8f9fa;
padding: 1rem;
border-radius: 12px;
margin-bottom: 1.5rem;
box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.step-number {
background-color: #ffc107;
color: white;
font-weight: bold;
border-radius: 50%;
width: 36px;
height: 36px;
display: flex;
align-items: center;
justify-content: center;
font-size: 1.1rem;
flex-shrink: 0;
}

.step p {
margin: 0;
font-size: 1.05rem;
line-height: 1.6;
}
</style>
</head>
<body>
<div class="container py-4">
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
<div class="container">
<a class="navbar-brand" href="#">Menu</a>
<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarNav">
<ul class="navbar-nav ms-auto">
<li class="nav-item"><a class="nav-link" href="#nutriscoremoyen">NutriScore moyen</a></li>
<li class="nav-item"><a class="nav-link" href="#ingredients">Ingrédients</a></li>
<li class="nav-item"><a class="nav-link" href="#preparation">Préparation</a></li>
<li class="nav-item"><a class="nav-link" href="#apropos">À propos</a></li>
</ul>
</div>
</div>
</nav>

<header class="text-center mb-5">
<img src="https://assets.afcdn.com/recipe/20161115/42226_w1024h1024c1cx1831cy2746cxt0cyt0cxb3662cyb5493.jpg"
alt="Photo du pudding de pain perdu au parmesan"
class="header-img">
<h1 class="mt-3 mb-2">Pudding de pain perdu au parmesan</h1>
</header>

<section id="nutriscoremoyen" class="my-5">
<h2 class="section-title text-center">NutriScore moyen</h2>
<div class="row justify-content-center">
<div class="col-md-6 col-lg-4">
<div class="card shadow-sm border-0">
<div class="card-body text-center">
<p class="mb-3">Voici l’évaluation moyenne du plat selon les NutriScores de ses ingrédients :</p>
<div id="nutriscore-moyen" class="my-3"></div>
</div>
</div>
</div>
</div>
</section>

<section id="ingredients" class="mb-5">
<h2 class="section-title">Ingrédients</h2>
<div id="ingredients-list" class="row"></div>
</section>

<section id="preparation" class="recipe-section">
<div class="col-lg-8 col-md-6">
<div class="recipe-section">
<h2 class="section-title">Préparation</h2>
<div class="steps">
<div class="step">
<div class="step-number">1</div>
<p>Préchauffer le four à 180°C (thermostat 6).</p>
</div>
<div class="step">
<div class="step-number">2</div>
<p>Couper le pain en tranches fines, ajouter le lait, laisser imbiber et malaxer jusqu'à obtenir une pâte grossière.</p>
</div>
<div class="step">
<div class="step-number">3</div>
<p>Battre les œufs et incorporer le yaourt, les olives, les tomates, le parmesan, les piments doux. Assaisonner.</p>
</div>
<div class="step">
<div class="step-number">4</div>
<p>Si le mélange est trop liquide, ajouter du pain sec pour l’assécher.</p>
</div>
<div class="step">
<div class="step-number">5</div>
<p>Verser dans un moule beurré, saupoudrer de parmesan et cumin. Cuire 45 min à 180°C.</p>
</div>
<div class="step">
<div class="step-number">6</div>
<p>Laisser refroidir avant de servir.</p>
</div>
</div>
</div>
</div>
</section>
</div>

<footer id="apropos" class="text-center py-4 border-top">
<h2 class="section-title">À propos</h2>
<p class="mb-0">IF08 - Printemps 2025</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
const nutriImgURL = (letter) => `https://static.openfoodfacts.org/images/misc/nutriscore-${letter.toLowerCase()}.svg`;

fetch("ingredients.json")
.then(response => response.json())
.then(ingredients => {
const container = document.getElementById("ingredients-list");

ingredients.forEach(ingredient => {
const col = document.createElement("div");
col.className = "col-lg-4 col-md-6";

const card = document.createElement("div");
card.className = "card mb-4";

const img = document.createElement("img");
img.className = "card-img-top";
img.src = ingredient.image;
img.alt = `Image de ${ingredient.nom}`;

const body = document.createElement("div");
body.className = "card-body";

const title = document.createElement("h5");
title.className = "card-title";
title.innerHTML = `<a href="${ingredient.lien}" target="_blank">${ingredient.nom}</a>`;

const nutriImg = document.createElement("img");
nutriImg.className = "nutriscore";
nutriImg.src = nutriImgURL(ingredient.nutriscore);
nutriImg.alt = `Nutri-Score ${ingredient.nutriscore}`;

body.appendChild(title);
body.appendChild(nutriImg);
card.appendChild(img);
card.appendChild(body);
col.appendChild(card);
container.appendChild(col);
});

// Nutriscore moyen (version simplifiée)
const scoreAffichage = document.getElementById('nutriscore-moyen');
const lettreToScore = { A: -1, B: 2, C: 10, D: 18, E: 40 };
let nutriTotal = 0, nutriCount = 0;
ingredients.forEach(ing => {
const score = lettreToScore[ing.nutriscore.toUpperCase()];
if (typeof score === "number") {
nutriTotal += score;
nutriCount++;
}
});
const moyenne = Math.round(nutriTotal / nutriCount);
let lettre;
if (moyenne <= -1) lettre = 'A';
else if (moyenne <= 2) lettre = 'B';
else if (moyenne <= 10) lettre = 'C';
else if (moyenne <= 18) lettre = 'D';
else lettre = 'E';
scoreAffichage.innerHTML = `
<img src="https://static.openfoodfacts.org/images/attributes/dist/nutriscore-${lettre.toLowerCase()}.svg"
alt="Nutri-score ${lettre}" style="height: 100px;">
`;
});
</script>
</body>
</html>
